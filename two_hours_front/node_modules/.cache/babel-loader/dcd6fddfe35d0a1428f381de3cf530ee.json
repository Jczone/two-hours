{"ast":null,"code":"var Param = function () {\n  function Param(target, e) {\n    this.target = target;\n    this.topTarget = e && e.topTarget;\n  }\n\n  return Param;\n}();\n\nvar Draggable = function () {\n  function Draggable(handler) {\n    this.handler = handler;\n    handler.on('mousedown', this._dragStart, this);\n    handler.on('mousemove', this._drag, this);\n    handler.on('mouseup', this._dragEnd, this);\n  }\n\n  Draggable.prototype._dragStart = function (e) {\n    var draggingTarget = e.target;\n\n    while (draggingTarget && !draggingTarget.draggable) {\n      draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n    }\n\n    if (draggingTarget) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n    }\n  };\n\n  Draggable.prototype._drag = function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n        }\n\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  };\n\n  Draggable.prototype._dragEnd = function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n\n    this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n\n    if (this._dropTarget) {\n      this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n    }\n\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  };\n\n  return Draggable;\n}();\n\nexport default Draggable;","map":{"version":3,"sources":["F:/Desktop/繁星教育/TH资料/two_hours_front/node_modules/zrender/lib/mixin/Draggable.js"],"names":["Param","target","e","topTarget","Draggable","handler","on","_dragStart","_drag","_dragEnd","prototype","draggingTarget","draggable","parent","__hostTarget","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","x","y","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget"],"mappings":"AAAA,IAAIA,KAAK,GAAI,YAAY;AACrB,WAASA,KAAT,CAAeC,MAAf,EAAuBC,CAAvB,EAA0B;AACtB,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKE,SAAL,GAAiBD,CAAC,IAAIA,CAAC,CAACC,SAAxB;AACH;;AACD,SAAOH,KAAP;AACH,CANY,EAAb;;AAOA,IAAII,SAAS,GAAI,YAAY;AACzB,WAASA,SAAT,CAAmBC,OAAnB,EAA4B;AACxB,SAAKA,OAAL,GAAeA,OAAf;AACAA,IAAAA,OAAO,CAACC,EAAR,CAAW,WAAX,EAAwB,KAAKC,UAA7B,EAAyC,IAAzC;AACAF,IAAAA,OAAO,CAACC,EAAR,CAAW,WAAX,EAAwB,KAAKE,KAA7B,EAAoC,IAApC;AACAH,IAAAA,OAAO,CAACC,EAAR,CAAW,SAAX,EAAsB,KAAKG,QAA3B,EAAqC,IAArC;AACH;;AACDL,EAAAA,SAAS,CAACM,SAAV,CAAoBH,UAApB,GAAiC,UAAUL,CAAV,EAAa;AAC1C,QAAIS,cAAc,GAAGT,CAAC,CAACD,MAAvB;;AACA,WAAOU,cAAc,IAAI,CAACA,cAAc,CAACC,SAAzC,EAAoD;AAChDD,MAAAA,cAAc,GAAGA,cAAc,CAACE,MAAf,IAAyBF,cAAc,CAACG,YAAzD;AACH;;AACD,QAAIH,cAAJ,EAAoB;AAChB,WAAKI,eAAL,GAAuBJ,cAAvB;AACAA,MAAAA,cAAc,CAACK,QAAf,GAA0B,IAA1B;AACA,WAAKC,EAAL,GAAUf,CAAC,CAACgB,OAAZ;AACA,WAAKC,EAAL,GAAUjB,CAAC,CAACkB,OAAZ;AACA,WAAKf,OAAL,CAAagB,iBAAb,CAA+B,IAAIrB,KAAJ,CAAUW,cAAV,EAA0BT,CAA1B,CAA/B,EAA6D,WAA7D,EAA0EA,CAAC,CAACoB,KAA5E;AACH;AACJ,GAZD;;AAaAlB,EAAAA,SAAS,CAACM,SAAV,CAAoBF,KAApB,GAA4B,UAAUN,CAAV,EAAa;AACrC,QAAIS,cAAc,GAAG,KAAKI,eAA1B;;AACA,QAAIJ,cAAJ,EAAoB;AAChB,UAAIY,CAAC,GAAGrB,CAAC,CAACgB,OAAV;AACA,UAAIM,CAAC,GAAGtB,CAAC,CAACkB,OAAV;AACA,UAAIK,EAAE,GAAGF,CAAC,GAAG,KAAKN,EAAlB;AACA,UAAIS,EAAE,GAAGF,CAAC,GAAG,KAAKL,EAAlB;AACA,WAAKF,EAAL,GAAUM,CAAV;AACA,WAAKJ,EAAL,GAAUK,CAAV;AACAb,MAAAA,cAAc,CAACgB,KAAf,CAAqBF,EAArB,EAAyBC,EAAzB,EAA6BxB,CAA7B;AACA,WAAKG,OAAL,CAAagB,iBAAb,CAA+B,IAAIrB,KAAJ,CAAUW,cAAV,EAA0BT,CAA1B,CAA/B,EAA6D,MAA7D,EAAqEA,CAAC,CAACoB,KAAvE;AACA,UAAIM,UAAU,GAAG,KAAKvB,OAAL,CAAawB,SAAb,CAAuBN,CAAvB,EAA0BC,CAA1B,EAA6Bb,cAA7B,EAA6CV,MAA9D;AACA,UAAI6B,cAAc,GAAG,KAAKC,WAA1B;AACA,WAAKA,WAAL,GAAmBH,UAAnB;;AACA,UAAIjB,cAAc,KAAKiB,UAAvB,EAAmC;AAC/B,YAAIE,cAAc,IAAIF,UAAU,KAAKE,cAArC,EAAqD;AACjD,eAAKzB,OAAL,CAAagB,iBAAb,CAA+B,IAAIrB,KAAJ,CAAU8B,cAAV,EAA0B5B,CAA1B,CAA/B,EAA6D,WAA7D,EAA0EA,CAAC,CAACoB,KAA5E;AACH;;AACD,YAAIM,UAAU,IAAIA,UAAU,KAAKE,cAAjC,EAAiD;AAC7C,eAAKzB,OAAL,CAAagB,iBAAb,CAA+B,IAAIrB,KAAJ,CAAU4B,UAAV,EAAsB1B,CAAtB,CAA/B,EAAyD,WAAzD,EAAsEA,CAAC,CAACoB,KAAxE;AACH;AACJ;AACJ;AACJ,GAvBD;;AAwBAlB,EAAAA,SAAS,CAACM,SAAV,CAAoBD,QAApB,GAA+B,UAAUP,CAAV,EAAa;AACxC,QAAIS,cAAc,GAAG,KAAKI,eAA1B;;AACA,QAAIJ,cAAJ,EAAoB;AAChBA,MAAAA,cAAc,CAACK,QAAf,GAA0B,KAA1B;AACH;;AACD,SAAKX,OAAL,CAAagB,iBAAb,CAA+B,IAAIrB,KAAJ,CAAUW,cAAV,EAA0BT,CAA1B,CAA/B,EAA6D,SAA7D,EAAwEA,CAAC,CAACoB,KAA1E;;AACA,QAAI,KAAKS,WAAT,EAAsB;AAClB,WAAK1B,OAAL,CAAagB,iBAAb,CAA+B,IAAIrB,KAAJ,CAAU,KAAK+B,WAAf,EAA4B7B,CAA5B,CAA/B,EAA+D,MAA/D,EAAuEA,CAAC,CAACoB,KAAzE;AACH;;AACD,SAAKP,eAAL,GAAuB,IAAvB;AACA,SAAKgB,WAAL,GAAmB,IAAnB;AACH,GAXD;;AAYA,SAAO3B,SAAP;AACH,CAzDgB,EAAjB;;AA0DA,eAAeA,SAAf","sourcesContent":["var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n"]},"metadata":{},"sourceType":"module"}